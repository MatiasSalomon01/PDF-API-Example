@using WebApi
@using WebApi.Controllers
@using WebApi.Helpers
@model WebApi.Models.ReportViewModel

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Reporte Illumina COVIDSeq</title>

    <style>
        @Html.Raw(CssHelper.Load("css/report.css"))
    </style>

</head>
<body>
    <div class="report-page-container">
        <header class="report-header">
            <div class="report-header__logo">
                <img src="@Model.LogoUrl" alt="Illumina Logo" class="report-header__logo-img" />
                <span class="report-header__title">COVIDSeq<sup><small>TM</small></sup> Test</span>
            </div>
            <div class="report-header__date-info">
                <span>Report Date </span><span class="report-text--bold">@Model.ReportDate</span>
            </div>
        </header>

        <main class="report-content">
            <div class="report-alert-box report-alert-box--warning">
                <img src="@Model.WarningIconUrl" alt="Warning Icon" class="report-icon report-icon--small" />
                <span class="report-alert-box__text report-alert-box__text--warning">For use under an Emergency Use Authorization (EUA) Only</span>
            </div>

            <div class="report-spacing--lg"></div>

            <section class="report-section-grid">
                <div class="report-section-grid__item">
                    <h3 class="report-heading">Run Information</h3>
                    <div class="report-spacing--sm"></div>
                    <div class="report-card report-card--light-grey">
                        <table class="report-info-table">
                            <tr>
                                <td class="report-info-table__label">Run ID:</td>
                                <td class="report-info-table__value">@Model.RunId</td>
                            </tr>
                            <tr>
                                <td class="report-info-table__label">Run Date:</td>
                                <td class="report-info-table__value">@Model.RunDate</td>
                            </tr>
                            <tr>
                                <td class="report-info-table__label">Instrument serial:</td>
                                <td class="report-info-table__value">@Model.InstrumentSerial</td>
                            </tr>
                            <tr>
                                <td class="report-info-table__label">Flow Cell ID:</td>
                                <td class="report-info-table__value">@Model.FlowCellId</td>
                            </tr>
                            <tr>
                                <td class="report-info-table__label">Software Version:</td>
                                <td class="report-info-table__value">@Model.SoftwareVersion</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="report-section-grid__item report-section-grid__item--flex-grow">
                    <h3 class="report-heading">Quality Control</h3>
                    <div class="report-spacing--sm"></div>
                    <div class="report-card report-card--light-grey">
                        <div class="report-quality-control-grid">
                            @foreach (var lane in Model.QualityControlLanes)
                            {
                                <div class="report-quality-control-grid__column">
                                    <table class="report-quality-control-table">
                                        <tr>
                                            <td class="report-quality-control-table__label">@lane.Name</td>
                                            <td class="report-quality-control-table__status" style="color: @lane.StatusColor;">@lane.Status</td>
                                        </tr>
                                        @foreach (var indexSet in lane.IndexSets)
                                        {
                                            <tr>
                                                <td class="report-quality-control-table__label report-quality-control-table__label--indent">@indexSet.Name</td>
                                                <td class="report-quality-control-table__status" style="color: @indexSet.StatusColor;">@indexSet.Status</td>
                                            </tr>
                                        }
                                    </table>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </section>

            <div class="report-spacing--lg"></div>

            <h3 class="report-heading">Invalid Results (@Model.DetectedSamples.Count(s => s.Result == "Invalid"))</h3> @* Asumo que quieres contar los "Invalid" aquí, ajusta si es necesario *@
            <div class="report-spacing--sm"></div>
            <div class="report-alert-box report-alert-box--info report-card--light-grey">
                <img src="@Model.InfoIconUrl" alt="Info Icon" class="report-icon report-icon--small" />
                <span class="report-alert-box__text report-alert-box__text--info">None</span>
            </div>

            <div class="report-spacing--lg"></div>

            <h3 class="report-heading">SARS-CoV-2 Detected (@Model.DetectedSamples.Count)</h3>
            <table class="report-data-table">
                <thead>
                    <tr>
                        <th class="report-data-table__header">Sample ID</th>
                        <th class="report-data-table__header">Intern Control</th>
                        <th class="report-data-table__header">Result</th>
                        <th class="report-data-table__header">Consensus Sequence</th>
                        <th class="report-data-table__header">Lane / Index Set</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var sample in Model.DetectedSamples)
                    {
                        <tr>
                            <td class="report-data-table__cell">@sample.SampleId</td>
                            <td class="report-data-table__cell">@sample.InternalControl</td>
                            <td class="report-data-table__cell report-text--bold" style="color: @sample.ResultColor;">@sample.Result</td>
                            <td class="report-data-table__cell">@sample.ConsensusSequence</td>
                            <td class="report-data-table__cell">@sample.LaneIndexSet</td>
                        </tr>
                    }
                </tbody>
            </table>

            <div class="report-spacing--lg"></div>

            <h3 class="report-heading">SARS-CoV-2 Not Detected (@Model.NotDetectedSamples.Count)</h3>
            <table class="report-data-table">
                <thead>
                    <tr>
                        <th class="report-data-table__header">Sample ID</th>
                        <th class="report-data-table__header">Intern Control</th>
                        <th class="report-data-table__header">Result</th>
                        <th class="report-data-table__header">Consensus Sequence</th>
                        <th class="report-data-table__header">Lane / Index Set</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var sample in Model.NotDetectedSamples)
                    {
                        <tr>
                            <td class="report-data-table__cell">@sample.SampleId</td>
                            <td class="report-data-table__cell">@sample.InternalControl</td>
                            <td class="report-data-table__cell report-text--bold">@sample.Result</td>
                            <td class="report-data-table__cell">@sample.ConsensusSequence</td>
                            <td class="report-data-table__cell">@sample.LaneIndexSet</td>
                        </tr>
                    }
                </tbody>
            </table>
        </main>

        <footer class="report-footer">
            <div class="report-page-number-box">
                <span class="report-text--extra-bold">1</span> of <span class="report-text--extra-bold">52</span> @* Hardcoded como en la imagen, para paginación real se requiere JS o CSS Print *@
            </div>
        </footer>
    </div>
</body>
</html>